<div class="container-fluid d-flex flex-column gallery bg-light p-0">
  <app-search-bar [searchTerms]="searchTerms" (ratingChange)="setSearchTerms($event)"></app-search-bar>
  <div #flexGallery class="container-fluid flex-gallery" [ngClass]="isInErrorState ? 'align-items-center justify-content-center' : ''">
    <div *ngIf="!isLoaded" class="loader flex-loader"></div>
    <app-error-display *ngIf="isInErrorState" [errorMessage]="errorMessage"></app-error-display>
    <div [ngStyle]="{'display': isInErrorState ? 'none': 'block'}" #galleryContainer class="row-height">
      <ng-masonry-grid
        (onNgMasonryInit)="onNgMasonryInit($event)"
        [masonryOptions]="{ addStatus: 'append', transitionDuration: '0.5s', columnWidth: 300, gutter: 5, fitWidth: true }"
        [useAnimation]="true"
        class="pt-2">
        <ng-masonry-grid-item
          *ngFor="let post of posts | paginate: {itemsPerPage: pageSize, currentPage: page, totalItems: totalItems}"
          @animateImages>
          <app-gallery-image [container]="container" [post]="post"></app-gallery-image>
        </ng-masonry-grid-item>
      </ng-masonry-grid>
    </div>
  </div>
  <div class="row justify-content-center py-2 bg-dark">
    <pagination-controls class="my-pagination" (pageChange)="goToPage($event)"></pagination-controls>
  </div>
</div>

